

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/fluid.png">
  <link rel="icon" href="/img/fluid.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="John Doe">
  <meta name="keywords" content="">
  
    <meta name="description" content="Vue 第五天一、 vue生命周期1.1 生命周期 一个vue组件从 创建 到 销毁 的整个过程就是生命周期   1.2 钩子函数（真正的生命周期不止这几个，今天主要介绍工作中常用的生命周期，没有介绍的后期再去了解，一般仅局限于面试）  目标: Vue 框架内置函数，随着组件的生命周期阶段，自动执行  作用: 特定的时间点，执行特定的操作 场景: 组件创建完毕后，可以在created 生命周期函数">
<meta property="og:type" content="article">
<meta property="og:title" content="Vue 第五天">
<meta property="og:url" content="http://example.com/2022/09/21/Vue/vue05/Vue-%E7%AC%AC%E4%BA%94%E5%A4%A9/index.html">
<meta property="og:site_name" content="每日笔记">
<meta property="og:description" content="Vue 第五天一、 vue生命周期1.1 生命周期 一个vue组件从 创建 到 销毁 的整个过程就是生命周期   1.2 钩子函数（真正的生命周期不止这几个，今天主要介绍工作中常用的生命周期，没有介绍的后期再去了解，一般仅局限于面试）  目标: Vue 框架内置函数，随着组件的生命周期阶段，自动执行  作用: 特定的时间点，执行特定的操作 场景: 组件创建完毕后，可以在created 生命周期函数">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://image.zhangyc.top/img/image-20220921192351724.png">
<meta property="og:image" content="http://image.zhangyc.top/img/70a18eca2aa3421689884f09a666813b.png">
<meta property="og:image" content="http://image.zhangyc.top/img/6.gif">
<meta property="og:image" content="http://image.zhangyc.top/img/4.png">
<meta property="og:image" content="http://image.zhangyc.top/img/image-20220921204300593.png">
<meta property="og:image" content="http://image.zhangyc.top/img/image-20220921204734660.png">
<meta property="og:image" content="http://image.zhangyc.top/img/image-20220921204516880.png">
<meta property="og:image" content="http://image.zhangyc.top/img/image-20220921205724436.png">
<meta property="og:image" content="http://image.zhangyc.top/img/123.gif">
<meta property="og:image" content="http://image.zhangyc.top/img/image-20220923183804341.png">
<meta property="og:image" content="http://image.zhangyc.top/img/image-20220923183812119.png">
<meta property="og:image" content="http://image.zhangyc.top/img/111.gif">
<meta property="og:image" content="http://image.zhangyc.top/img/$nextTick%E4%BD%BF%E7%94%A8.gif">
<meta property="og:image" content="http://image.zhangyc.top/img/%E8%B4%AD%E7%89%A9%E8%BD%A6%E5%85%A8%E6%95%88%E6%9E%9C.gif">
<meta property="og:image" content="https://restianootbook.netlify.app/06-vue%E5%9F%BA%E7%A1%80/vue05/vue05/images/image-20220610132943432.png">
<meta property="og:image" content="https://restianootbook.netlify.app/06-vue%E5%9F%BA%E7%A1%80/vue05/vue05/images/image-20220610133341667.png">
<meta property="og:image" content="https://restianootbook.netlify.app/06-vue%E5%9F%BA%E7%A1%80/vue05/vue05/images/image-20210223141427684.png">
<meta property="article:published_time" content="2022-09-21T11:20:59.147Z">
<meta property="article:modified_time" content="2022-09-23T11:00:49.722Z">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="http://image.zhangyc.top/img/image-20220921192351724.png">
  
  
  
  <title>Vue 第五天 - 每日笔记</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"example.com","root":"/","version":"1.9.3","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml"};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 6.3.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Fluid</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                归档
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                分类
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                标签
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                关于
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              &nbsp;<i class="iconfont icon-search"></i>&nbsp;
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/default.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="Vue 第五天"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2022-09-21 19:20" pubdate>
          2022年9月21日 晚上
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          38k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          318 分钟
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">Vue 第五天</h1>
            
            
              <div class="markdown-body">
                
                <h1 id="Vue-第五天"><a href="#Vue-第五天" class="headerlink" title="Vue 第五天"></a>Vue 第五天</h1><h2 id="一、-vue生命周期"><a href="#一、-vue生命周期" class="headerlink" title="一、 vue生命周期"></a>一、 vue生命周期</h2><h3 id="1-1-生命周期"><a href="#1-1-生命周期" class="headerlink" title="1.1 生命周期"></a>1.1 生命周期</h3><blockquote>
<p>一个vue组件从 创建 到 销毁 的整个过程就是生命周期</p>
</blockquote>
<p><img src="http://image.zhangyc.top/img/image-20220921192351724.png" srcset="/img/loading.gif" lazyload alt="image-20220921192351724"></p>
<h3 id="1-2-钩子函数"><a href="#1-2-钩子函数" class="headerlink" title="1.2 钩子函数"></a>1.2 钩子函数</h3><p>（真正的生命周期不止这几个，今天主要介绍工作中常用的生命周期，没有介绍的后期再去了解，一般仅局限于面试）</p>
<blockquote>
<p>目标: <strong>Vue</strong> 框架内置函数，随着组件的生命周期阶段，自动执行</p>
</blockquote>
<p>作用: 特定的时间点，执行特定的操作</p>
<p>场景: 组件创建完毕后，可以在created 生命周期函数中发起Ajax 请求，从而初始化 data 数据</p>
<p>分类: 4大阶段8个方法</p>
<ul>
<li>初始化</li>
<li>挂载</li>
<li>更新</li>
<li>销毁</li>
</ul>
<table>
<thead>
<tr>
<th><strong>阶段</strong></th>
<th><strong>方法名</strong></th>
<th><strong>方法名</strong></th>
</tr>
</thead>
<tbody><tr>
<td>初始化</td>
<td>beforeCreate</td>
<td>created</td>
</tr>
<tr>
<td>挂载</td>
<td>beforeMount</td>
<td>mounted</td>
</tr>
<tr>
<td>更新</td>
<td>beforeUpdate</td>
<td>updated</td>
</tr>
<tr>
<td>销毁</td>
<td>beforeDestroy</td>
<td>destroyed</td>
</tr>
</tbody></table>
<p><a target="_blank" rel="noopener" href="https://cn.vuejs.org/v2/guide/instance.html#%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E5%9B%BE%E7%A4%BA">官网文档</a>下图展示了实例的生命周期。你不需要立马弄明白所有的东西，不过随着你的不断学习和使用，它的参考价值会越来越高。</p>
<p><img src="http://image.zhangyc.top/img/70a18eca2aa3421689884f09a666813b.png" srcset="/img/loading.gif" lazyload></p>
<h3 id="1-3-初始化阶段"><a href="#1-3-初始化阶段" class="headerlink" title="1.3 初始化阶段"></a>1.3 初始化阶段</h3><blockquote>
<p>目标: 掌握初始化阶段2个钩子函数作用和执行时机</p>
</blockquote>
<p>含义讲解:</p>
<p>1.new Vue() – Vue实例化(组件也是一个小的Vue实例)</p>
<p>2.Init Events &amp; Lifecycle – 初始化事件和生命周期函数</p>
<p>3.beforeCreate – 生命周期钩子函数被执行</p>
<p>4.Init injections&amp;reactivity – Vue内部添加data和methods等</p>
<p>5.created – 生命周期钩子函数被执行, 实例创建</p>
<h3 id="1-4-挂载阶段"><a href="#1-4-挂载阶段" class="headerlink" title="1.4 挂载阶段"></a>1.4 挂载阶段</h3><blockquote>
<p>目标: 掌握挂载阶段2个钩子函数作用和执行时机</p>
</blockquote>
<p>1.template选项检查</p>
<p> 有 - 编译template返回render渲染函数</p>
<p> 无 – 编译el选项对应标签作为template(要渲染的模板)（非脚手架）</p>
<p>2.虚拟DOM挂载成真实DOM之前</p>
<p>3.beforeMount – 生命周期钩子函数被执行</p>
<p>4.Create … – 把虚拟DOM和渲染的数据一并挂到真实DOM上</p>
<p>5.真实DOM挂载完毕</p>
<p>6.mounted – 生命周期钩子函数被执行</p>
<h3 id="1-5-更新阶段"><a href="#1-5-更新阶段" class="headerlink" title="1.5 更新阶段"></a>1.5 更新阶段</h3><blockquote>
<p>目标: 掌握更新阶段2个钩子函数作用和执行时机</p>
</blockquote>
<p>含义讲解:</p>
<p>1.当data里数据改变, 更新DOM之前</p>
<p>2.beforeUpdate – 生命周期钩子函数被执行</p>
<p>3.Virtual DOM…… – 虚拟DOM重新渲染, 打补丁到真实DOM</p>
<p>4.updated – 生命周期钩子函数被执行</p>
<p>5.当有data数据改变 – 重复这个循环</p>
<h3 id="1-6-销毁阶段"><a href="#1-6-销毁阶段" class="headerlink" title="1.6 销毁阶段"></a>1.6 销毁阶段</h3><blockquote>
<p>目标: 掌握销毁阶段2个钩子函数作用和执行时机</p>
</blockquote>
<p>含义讲解:</p>
<p>1.当$destroy()被调用 – 比如组件DOM被移除(例v-if)</p>
<p>2.beforeDestroy – 生命周期钩子函数被执行</p>
<p>3.拆卸数据监视器、子组件和事件侦听器</p>
<p>4.实例销毁后, 最后触发一个钩子函数</p>
<p>5.destroyed – 生命周期钩子函数被执行</p>
<h3 id="1-7-代码块"><a href="#1-7-代码块" class="headerlink" title="1.7 代码块"></a>1.7 代码块</h3><blockquote>
<p>App.vue</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div id=&quot;app&quot;&gt;<br>    &lt;!-- &lt;Life v-if=&quot;flag&quot;&gt;&lt;/Life&gt; --&gt;<br>    &lt;!-- &lt;button @click=&quot;flag = !flag&quot;&gt;销毁life组件&lt;/button&gt; --&gt;<br>    &lt;Ref&gt;&lt;/Ref&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>// import Life from &#x27;./components/life.vue&#x27;<br>  import Ref from &#x27;./components/refandRefs.vue&#x27;<br>export default &#123;<br>  name: &#x27;App&#x27;,<br>  components: &#123;<br>    // Life,<br>    Ref<br>  &#125;,<br>  data () &#123;<br>    return &#123;<br>      flag: true<br>    &#125;<br>  &#125;<br>&#125;<br>&lt;/script&gt;<br><br>&lt;style scoped&gt;<br>&lt;/style&gt;<br><br></code></pre></td></tr></table></figure>

<blockquote>
<p>components&#x2F;life.vue</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div&gt;<br>    &lt;!-- <br>      如果在vue项目中，我希望当某个组件渲染到页面之前、渲染到也上时、组件从页面上删除前<br>      在这3个时间点，我们有一些业务逻辑操作需要执行<br><br>      eventBus.$on() =&gt; mounted()&#123;&#125;<br>     --&gt;<br>     &lt;div id=&quot;demo&quot;&gt;&#123;&#123; msg &#125;&#125;&lt;/div&gt;<br>     &lt;ul&gt;<br>        &lt;li v-for=&quot;(value, index) in arr&quot; :key=&quot;index&quot;&gt;&#123;&#123; value &#125;&#125;&lt;/li&gt;<br>     &lt;/ul&gt;<br>     &lt;button @click=&quot;arr.push(4)&quot;&gt;加一行&lt;/button&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>export default &#123;<br>  name: &#x27;LifeIndex&#x27;,<br>  data () &#123;<br>    return &#123;<br>      msg: &#x27;hello world&#x27;,<br>      arr: [1, 2, 3],<br>      timer: null // 定时器<br>    &#125;<br>  &#125;,<br><br>  // 1. 初始化阶段<br>  // 1.1 初始化前 beforeCreate<br>  beforeCreate () &#123;<br>    console.log(&#x27;----beforeCreate执行----&#x27;)<br>    console.log(&#x27;初始化前访问data中的数据：&#x27;, this.msg)<br>  &#125;,<br><br>  // 1.2 初始化后 created （常用）<br>  // 在created中是最先获取data数据，使用methods方法等的时机<br>  // 使用场景： 当处理数据（静态数据，通过网络请求后端获取的数据），注册一些全局事件时，应该设置在created中<br>  created () &#123;<br>    console.log(&#x27;----created执行----&#x27;)<br>    console.log(&#x27;初始化后访问数据：&#x27;, this.msg)<br>    console.log(document.querySelector(&#x27;#demo&#x27;))<br>    // this.timer = setInterval(() =&gt; &#123;console.log(&#x27;setInterval&#x27;)&#125;, 2000)<br>  &#125;,<br><br>  // 2. 挂载阶段<br>  // 2.1 挂载前 beforeMount 在此时，不能访问dom元素，但可以读取data数据，与created中能执行的操作完全一样<br>  beforeMount () &#123;<br>    console.log(&#x27;----beforeMount执行----&#x27;)<br>    console.log(&#x27;挂载前获取dom元素&#x27;, document.querySelector(&#x27;#demo&#x27;))<br>  &#125;,<br><br>  // 2.2 挂载后 mounted （常用）<br>  // 此时真实dom已挂载到页面上，可以执行dom操作<br>  // 同时也可以堆数据进行处理<br><br>  // 注意事项：如果你比较懒，同时也不确定是否需要左dom操作，那么直接把逻辑放到mounted里面绝不会错<br>  mounted () &#123;<br>    console.log(&#x27;----mounted执行----&#x27;)<br>    console.log(&#x27;挂载后获取dom元素&#x27;, document.querySelector(&#x27;#demo&#x27;))<br>  &#125;,<br><br>  // 3. 更新阶段<br>  // 3.1 更新前 BeforeUpdate<br>  beforeUpdate () &#123;<br>    console.log(&#x27;----beforeUpdate执行----&#x27;)<br>    console.log(this.arr[3])<br>    console.log(document.querySelectorAll(&#x27;li&#x27;)[3])<br>  &#125;,<br><br>  // 3.2 更新后 updated<br>  // update阶段会产生无限的更新循环，所以如果以后需要在数据变化时做业务操作时，用监听器watch来实现<br>  updated() &#123;<br>    console.log(&#x27;----updated执行----&#x27;)<br>    console.log(this.arr[3])<br>    console.log(document.querySelectorAll(&#x27;li&#x27;)[3])<br>  &#125;,<br><br>  // 4. 销毁阶段<br>  // 4.1 销毁前 beforeDestroy (常用)<br>  // 使用场景： 如果当前组件存在计时器定时器等等异步操作时，需要在当前阶段将其关闭<br>  beforeDestroy () &#123;<br>    console.log(&#x27;----beforeDestroy执行----&#x27;)<br>    clearInterval(this.timer)<br>  &#125;,<br><br>  // 4.2 销毁后 destroyed<br>  destroyed () &#123;<br>    console.log(&#x27;----destroyed执行----&#x27;)<br>  &#125;<br><br>  /* <br>   工作中需要使用到的钩子函数有：created初始化后， mounted挂载后， beforeDestroy销毁前<br>  */<br>&#125;<br>&lt;/script&gt;<br><br>&lt;style&gt;<br><br>&lt;/style&gt;<br></code></pre></td></tr></table></figure>

<blockquote>
<p>components&#x2F;child.vue</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div&gt;<br>    &#123;&#123; msg &#125;&#125;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>export default &#123;<br>  name: &#x27;ChildIndex&#x27;,<br>  data () &#123;<br>    return &#123;<br>      msg: &#x27;hello world&#x27;<br>    &#125;<br>  &#125;,<br><br>  methods: &#123;<br>    // 修改msg信息<br>    changeMsg (value) &#123;<br>      this.msg = value<br>    &#125;<br>  &#125;<br>&#125;<br>&lt;/script&gt;<br><br>&lt;style&gt;<br><br>&lt;/style&gt;<br></code></pre></td></tr></table></figure>

<p><img src="http://image.zhangyc.top/img/6.gif" srcset="/img/loading.gif" lazyload alt="6"></p>
<h3 id="1-8-总结"><a href="#1-8-总结" class="headerlink" title="1.8 总结"></a>1.8 总结</h3><p><img src="http://image.zhangyc.top/img/4.png" srcset="/img/loading.gif" lazyload></p>
<h2 id="二、-axios"><a href="#二、-axios" class="headerlink" title="二、 axios"></a>二、 axios</h2><h3 id="2-1-axios基本使用"><a href="#2-1-axios基本使用" class="headerlink" title="2.1 axios基本使用"></a>2.1 axios基本使用</h3><blockquote>
<p>axios是基于原神ajax+Promise技术封装通用于前后端的请求库</p>
<p>其原理为： 浏览器window接口的XMLHttpRequest</p>
<p><a target="_blank" rel="noopener" href="http://www.axios-js.com/">axios文档</a></p>
</blockquote>
<p><strong>特点</strong></p>
<ul>
<li>支持客户端发送Ajax请求</li>
<li>支持服务端Node.js发送请求</li>
<li>支持Promise相关用法</li>
<li>支持请求和响应的拦截器功能</li>
<li>自动转换JSON数据</li>
</ul>
<p><strong>axios 底层还是原生js实现, 内部通过Promise封装的</strong></p>
<p><strong>axios的基本使用</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-title function_">axios</span>(&#123;<br>  <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;请求方式&#x27;</span>, <span class="hljs-comment">// get post delete put</span><br>  <span class="hljs-attr">url</span>: <span class="hljs-string">&#x27;请求地址&#x27;</span>,<br>  <span class="hljs-attr">data</span>: &#123;    <span class="hljs-comment">// 拼接到请求体的参数,  post请求的参数</span><br>    <span class="hljs-attr">xxx</span>: xxx,<br>  &#125;,<br>  <span class="hljs-attr">params</span>: &#123;  <span class="hljs-comment">// 拼接到请求行的参数, get请求的参数</span><br>       <span class="hljs-attr">xxx</span>: xxx <br>  &#125;<br>&#125;).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res.<span class="hljs-property">data</span>) <span class="hljs-comment">// 后台返回的结果</span><br>&#125;).<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(err) <span class="hljs-comment">// 后台报错返回</span><br>&#125;)<br></code></pre></td></tr></table></figure>

<h3 id="2-2-获取数据-get"><a href="#2-2-获取数据-get" class="headerlink" title="2.2 获取数据 - get"></a>2.2 获取数据 - get</h3><blockquote>
<p>目标: 调用文档最后_获取所有图书信息接口</p>
</blockquote>
<p>功能: 点击调用后台接口, 拿到所有数据 – 打印到控制台</p>
<p>接口: <code>http://123.57.109.30:3006/api/getbooks</code></p>
<p>引入: 下载axios, 引入后才能使用</p>
<blockquote>
<p>npm i axios</p>
</blockquote>
<p>效果：</p>
<p><img src="http://image.zhangyc.top/img/image-20220921204300593.png" srcset="/img/loading.gif" lazyload alt="image-20220921204300593"></p>
<h3 id="2-3-获取数据-get传参"><a href="#2-3-获取数据-get传参" class="headerlink" title="2.3 获取数据 - get传参]"></a>2.3 获取数据 - get传参]</h3><blockquote>
<p>问：ajax如何给后台传参?</p>
<ol>
<li>在url?拼接–查询字符串</li>
<li>在url路径上–需要后端特殊处理</li>
<li>在请求体&#x2F; 请求头传参给后台</li>
</ol>
</blockquote>
<blockquote>
<p>目标: 调用接口-获取某本书籍信息</p>
</blockquote>
<p>功能: 点击调用后台接口, 查询用户想要的书籍信息 – 打印到控制台</p>
<p>接口: <code>/api/getbooks</code></p>
<p><img src="http://image.zhangyc.top/img/image-20220921204734660.png" srcset="/img/loading.gif" lazyload alt="image-20220921204734660"></p>
<h3 id="2-4-新增书籍-post"><a href="#2-4-新增书籍-post" class="headerlink" title="2.4 新增书籍 - post"></a>2.4 新增书籍 - post</h3><blockquote>
<p>目标: 完成发布书籍功能</p>
</blockquote>
<p>功能: 点击新增按钮, 把用户输入的书籍信息, 传递给后台 – 把结果打印在控制台</p>
<p>接口: <code>/api/addbook</code></p>
<p><img src="http://image.zhangyc.top/img/image-20220921204516880.png" srcset="/img/loading.gif" lazyload alt="image-20220921204516880"></p>
<p><strong>注意：</strong></p>
<ol>
<li><p>axios 默认为后台发送的请求数据格式为json字符串</p>
<p><img src="http://image.zhangyc.top/img/image-20220921205724436.png" srcset="/img/loading.gif" lazyload alt="image-20220921205724436"></p>
</li>
<li><p>post请求参数写在data中，get请求参数写在params中</p>
</li>
</ol>
<h3 id="2-5-代码块"><a href="#2-5-代码块" class="headerlink" title="2.5 代码块"></a>2.5 代码块</h3><blockquote>
<p>components&#x2F;UseAxios.vue</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div&gt;<br>    &lt;p&gt;1. 查询所有图书信息&lt;/p&gt;<br>    &lt;button @click=&quot;getAllFn&quot;&gt;点击-查看控制台&lt;/button&gt;<br>    &lt;p&gt;2. 查询图书信息&lt;/p&gt;<br>    &lt;input type=&quot;text&quot; placeholder=&quot;请输入要查询 的书名&quot; v-model=&quot;bName&quot; /&gt;<br>    &lt;button @click=&quot;findFn&quot;&gt;查询&lt;/button&gt;<br>    &lt;p&gt;3. 新增图书信息&lt;/p&gt;<br>    &lt;div&gt;<br>      &lt;input type=&quot;text&quot; placeholder=&quot;书名&quot; v-model=&quot;bookObj.bookname&quot; /&gt;<br>    &lt;/div&gt;<br>    &lt;div&gt;<br>      &lt;input type=&quot;text&quot; placeholder=&quot;作者&quot; v-model=&quot;bookObj.author&quot; /&gt;<br>    &lt;/div&gt;<br>    &lt;div&gt;<br>      &lt;input type=&quot;text&quot; placeholder=&quot;出版社&quot; v-model=&quot;bookObj.publisher&quot; /&gt;<br>    &lt;/div&gt;<br>    &lt;button @click=&quot;sendFn&quot;&gt;发布&lt;/button&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br>&lt;script&gt;<br>import axios from &quot;axios&quot;;<br>// 全局配置<br>axios.defaults.baseURL = &quot;http://123.57.109.30:3006&quot;;<br>export default &#123;<br>  data() &#123;<br>    return &#123;<br>      bName: &quot;&quot;,<br>      bookObj: &#123;<br>        // 参数名提前和后台的参数名对上-发送请求就不用再次修改<br>        bookname: &quot;&quot;,<br>        author: &quot;&quot;,<br>        publisher: &quot;&quot;,<br>      &#125;,<br>    &#125;;<br>  &#125;,<br>  methods: &#123;<br>    // 获取所有图书信息<br>    getAllFn() &#123;<br>      axios(&#123;<br>        method: &quot;GET&quot;, // 默认就是GET方式请求, 但不准省略<br>        url: &quot;/api/getbooks&quot;,<br>      &#125;)<br>        .then((res) =&gt; &#123;<br>          // axios()-原地得到Promise对象<br>          console.log(res);<br>        &#125;)<br>        .catch((err) =&gt; &#123;<br>          console.log(err);<br>        &#125;);<br>    &#125;,<br>    // 查询某本书籍信息<br>    findFn() &#123;<br>      axios(&#123;<br>        method: &quot;GET&quot;, // 默认就是GET方式请求, 但不准省略<br>        url: &quot;/api/getbooks&quot;,<br>        params: &#123;<br>          bookname: this.bName,<br>        &#125;,<br>      &#125;)<br>        .then((res) =&gt; &#123;<br>          // axios()-原地得到Promise对象<br>          console.log(res);<br>        &#125;)<br>        .catch((err) =&gt; &#123;<br>          console.log(err);<br>        &#125;);<br>    &#125;,<br>    // 新增图书信息<br>    sendFn() &#123;<br>      axios(&#123;<br>        url: &quot;/api/addbook&quot;,<br>        method: &quot;POST&quot;,<br>        data: &#123;<br>          appkey: &quot;7250d3eb-18e1-41bc-8bb2-11483665535a&quot;,<br>          ...this.bookObj,<br>          //等同于下面<br>          //    bookname: this.bookObj.bookname,<br>          //    author: this.bookObj.author,<br>          //    publisher: this.bookObj.publisher<br>        &#125;,<br>      &#125;).then((res) =&gt; &#123;<br>        alert(&quot;添加图书成功&quot;);<br>      &#125;);<br>    &#125;,<br>  &#125;,<br>&#125;;<br>&lt;/script&gt;<br>&lt;style scoped&gt;<br>&lt;/style&gt;<br></code></pre></td></tr></table></figure>

<blockquote>
<p>App.vue</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div id=&quot;app&quot;&gt;<br>    &lt;UseAxios&gt;&lt;/UseAxios&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>import UseAxios from &quot;./components/UseAxios&quot;;<br>export default &#123;<br>  name: &quot;App&quot;,<br>  components: &#123;<br>    // Life,<br>    // Ref,<br>    UseAxios,<br>  &#125;,<br>  data() &#123;<br>    return &#123;<br>      flag: true,<br>    &#125;;<br>  &#125;,<br>&#125;;<br>&lt;/script&gt;<br><br>&lt;style scoped&gt;<br>&lt;/style&gt;<br><br></code></pre></td></tr></table></figure>

<p><img src="http://image.zhangyc.top/img/123.gif" srcset="/img/loading.gif" lazyload alt="123"></p>
<h2 id="三、VUE实例的方法"><a href="#三、VUE实例的方法" class="headerlink" title="三、VUE实例的方法"></a>三、VUE实例的方法</h2><h3 id="3-1-refs-获取DOM元素·"><a href="#3-1-refs-获取DOM元素·" class="headerlink" title="3.1 $refs - 获取DOM元素·"></a>3.1 <code>$refs</code> - 获取DOM元素·</h3><blockquote>
<p>目标: 利用 ref 和 $refs 可以用于获取 dom 元素</p>
</blockquote>
<h3 id="3-2-refs-获取组件对象"><a href="#3-2-refs-获取组件对象" class="headerlink" title="3.2 $refs - 获取组件对象"></a>3.2 <code>$refs</code> - 获取组件对象</h3><blockquote>
<p>通过$refs 可以获取整个组件对象，并且使用该组件中的数据与方法</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div&gt;<br>    &lt;div id=&quot;demo&quot; ref=&quot;demo&quot;&gt;dom元素&lt;/div&gt;<br>    &lt;!-- <br>      作用一： vue中使用ref与refs来获取dom元素<br>      1. 给目标标签设置ref属性，这个属性和id差不多, 都具有唯一性<br>      2. 在js中通过this.$refs.名称 来获取dom元素<br><br>      作用二： 通过给某个组件设置ref属性，可以通过$refs来使用这个组件中的所有数据和方法<br>      1. 虽然可以通过refs将data中的数据读取到父组件中，而且可以通过父组件直接修改当前的数据，但是这种形式非常难于对数据进行规范的管理，所以，父组件中读取到的子组件数据只可使用不可修改<br>      2. 如果父组件一定要修改子组件的数据，那么子组件中需要暴露出一个专门用于修改某一特定属性的方法， 父组件通过$refs来进行调用和修改<br>     --&gt;<br>     &lt;Child ref=&quot;child&quot;&gt;&lt;/Child&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>import Child from &#x27;./child.vue&#x27;<br>export default &#123;<br>  name: &#x27;RefAndRefs&#x27;,<br>  components: &#123;<br>    Child<br>  &#125;,<br><br>  // 在挂载后才能读取到页面上的真实dom<br>  mounted () &#123;<br>    console.log(document.querySelector(&#x27;#demo&#x27;))<br>    console.log(this.$refs.demo)<br><br>    // 通过$refs来获取子组件中的数据<br>    console.log(this.$refs.child.msg)<br><br>    // 通过$refs来调用子组件中的方法<br>    this.$refs.child.changeMsg(&#x27;father say&#x27;)<br>  &#125;<br>&#125;<br>&lt;/script&gt;<br><br>&lt;style&gt;<br><br>&lt;/style&gt;<br></code></pre></td></tr></table></figure>

<p><img src="http://image.zhangyc.top/img/image-20220923183804341.png" srcset="/img/loading.gif" lazyload alt="image-20220923183804341"></p>
<p><img src="http://image.zhangyc.top/img/image-20220923183812119.png" srcset="/img/loading.gif" lazyload alt="image-20220923183812119"></p>
<h3 id="3-3-nextTick使用"><a href="#3-3-nextTick使用" class="headerlink" title="3.3 $nextTick使用"></a>3.3 <code>$nextTick</code>使用</h3><blockquote>
<p>Vue更新DOM-异步的!（数据与页面有延时）</p>
</blockquote>
<blockquote>
<p>案例：点击count++, 马上通过”原生DOM”拿标签内容, 无法拿到新值</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div&gt;<br>    &lt;!-- <br>        因为js的代码执行时由上往下依次逐行执行，<br>        所以当上一行代码执行完成后就会立即执行下一行代码<br><br>        以上理论带来的问题在于：<br>            上一行代码的操作影响了页面中dom元素的更新， 由由于dom的更新是异步操作，<br>            所以可能会导致下一行代码无法获取到最后的dom元素 <br>    --&gt;<br>    &lt;p ref=&quot;myP&quot;&gt;&#123;&#123; count &#125;&#125;&lt;/p&gt;<br>    &lt;button @click=&quot;btn&quot;&gt;count + 1&lt;/button&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>export default &#123;<br>  name: &quot;NextTcik&quot;,<br>  data() &#123;<br>    return &#123;<br>      count: 0,<br>    &#125;;<br>  &#125;,<br>  methods: &#123;<br>    // 通过点击按钮，让 count 变量加一，同时通过 dom 操作来获取页面上展示的数字的值<br>    btn() &#123;<br>      this.count++;<br>      console.log(&quot;数据中的值&quot;, this.count);<br>      console.log(&quot;页面中的值&quot;, this.$refs.myP.innerText);<br><br>      // 方案一： 使用setTimeout让后面的代码延时执行<br>      // 异步操作也需要在异步通道中排队，先放入的任务先执行，所以给setTimeout设置延时为0，可以解决这一问题<br>      setTimeout(() =&gt; &#123;<br>        console.log(&quot;setTimeout 延时后页面中的值&quot;, this.$refs.myP.innerText);<br>      &#125;, 0);<br><br>      // 方案二： 使用vue内置方法$nextTick(() =&gt; &#123;&#125;)<br>      // 作用： vue提供了一个内置的方法，该方法仅在dom更新后进行触发执行<br>      // 一般情况下要求所有个代码开发人员将 this.$nextTick 回调函数，写在方法的最后面<br>      this.$nextTick(() =&gt; &#123;<br>        console.log(&quot;$nextTick 后页面中的值&quot;, this.$refs.myP.innerText);<br>      &#125;);<br>      // this.$nextTick 执行后不要再后面写任何业务代码<br>    &#125;,<br>  &#125;,<br>&#125;;<br>&lt;/script&gt;<br><br>&lt;style&gt;<br>&lt;/style&gt;<br></code></pre></td></tr></table></figure>

<p><img src="http://image.zhangyc.top/img/111.gif" srcset="/img/loading.gif" lazyload alt="111"></p>
<h3 id="3-4-nextTick使用案例"><a href="#3-4-nextTick使用案例" class="headerlink" title="3.4 $nextTick使用案例"></a>3.4 $nextTick使用案例</h3><blockquote>
<p>目标: 点击搜索按钮, 弹出聚焦的输入框, 按钮消失</p>
</blockquote>
<p><img src="http://image.zhangyc.top/img/$nextTick%E4%BD%BF%E7%94%A8.gif" srcset="/img/loading.gif" lazyload alt="$nextTick使用"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>    &lt;div&gt;<br>        &lt;!-- 目标：按钮切换输入框， 输入框切换会按钮<br>                1. v-if v-else来实现两个标签的展示和切换<br>                2. 通过获取dom元素，通过.focus() 来实现自动聚焦<br>                3. @blur 绑定失焦事件，来切换回按钮 <br>        --&gt;<br>        &lt;button v-if=&quot;!isSearch&quot; @click=&quot;openInput&quot; &gt;点击切换搜索&lt;/button&gt;     <br>        &lt;input v-else type=&quot;text&quot;&gt;<br> <br>    &lt;/div&gt;<br>&lt;/template&gt;<br>&lt;script&gt;<br>export default &#123;<br>    name:&#x27;ChangeBtn&#x27;,<br>    data()&#123;<br>            return&#123;<br>                search:&#x27;&#x27;,<br>                isSearch: false,<br>            &#125;<br>    &#125;,<br>    methods:&#123;<br>        openInput()&#123;<br>            // 开启输入框<br>            this.isSearch = true<br>        &#125;<br>    &#125;,<br><br>&#125;<br>&lt;/script&gt;<br>&lt;style scoped&gt;<br><br>&lt;/style&gt;<br></code></pre></td></tr></table></figure>

<h3 id="3-5-nextTick实现原理-面试题"><a href="#3-5-nextTick实现原理-面试题" class="headerlink" title="3.5 nextTick实现原理(面试题)"></a>3.5 nextTick实现原理(面试题)</h3><figure class="highlight autohotkey"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs autohotkey">nextTick实现原理<br><br>   <span class="hljs-number">1</span>. `nextTick`是`Vue`提供的一个全局`API`，是下次`DOM`更新循环结束之后执行延时回调，在修改之后使用`$nextTick`，则可以再回调中获取更新后的`DOM`<br>   <span class="hljs-number">2</span>. vue在更新DOM时是异步执行的。只要侦听到数据变化，`vue`将开启<span class="hljs-number">1</span>个队列，并缓冲在同一事件循环中发生的所有数据变更。如果同一个`watcher`被多次触发，只会推入到队列中<span class="hljs-number">1</span>次。这种在缓冲时去除重复数据对于避免不必要的计算和`DOM`操作非常重要的。`nextTick`方法会在队列中加入一个回调函数，确保该函数在前面的`DOM`操作完成后才调用。<br></code></pre></td></tr></table></figure>

<h3 id="3-6-组件中的name属性作用"><a href="#3-6-组件中的name属性作用" class="headerlink" title="3.6 组件中的name属性作用"></a>3.6 组件中的name属性作用</h3><blockquote>
<p>目标: 可以用组件的name属性值, 来注册组件名字</p>
</blockquote>
<p>问题: 组件名不是可以随便写的?</p>
<p>答案: 我们封装的组件-可以自己定义name属性组件名-让使用者有个统一的前缀风格</p>
<p>步骤:</p>
<ol>
<li><p>创建<code>components/Com.vue</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div&gt;<br>      &lt;p&gt;我是一个Com组件&lt;/p&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>export default &#123;<br>    name: &quot;ComNameHaHa&quot; // 注册时可以定义自己的名字<br>&#125;<br>&lt;/script&gt;Copy to clipboardErrorCopied<br></code></pre></td></tr></table></figure>
</li>
<li><p>App.vue - 注册和使用</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div&gt;<br>    &lt;h1&gt;1. 生命周期&lt;/h1&gt;<br>    &lt;Life v-if=&quot;show&quot;&gt;&lt;/Life&gt;<br>    &lt;button @click=&quot;show = false&quot;&gt;销毁组件&lt;/button&gt;<br>    &lt;hr&gt;<br>    &lt;h1&gt;2. axios使用&lt;/h1&gt;<br>    &lt;UseAxios&gt;&lt;/UseAxios&gt;<br>    &lt;hr&gt;<br>    &lt;h1&gt;3. $refs的使用&lt;/h1&gt;<br>    &lt;More&gt;&lt;/More&gt;<br>    &lt;hr&gt;<br>    &lt;h1&gt;4. $nextTick使用场景&lt;/h1&gt;<br>    &lt;Tick&gt;&lt;/Tick&gt;<br>    &lt;hr&gt;<br>    &lt;h1&gt;5. 组件对象里name属性&lt;/h1&gt;<br>    &lt;ComNameHaHa&gt;&lt;/ComNameHaHa&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>import Life from &#x27;./components/Life&#x27;<br>import UseAxios from &#x27;./components/UseAxios&#x27;<br>import More from &#x27;./components/More&#x27;<br>import Tick from &#x27;./components/Tick&#x27;<br>import Com from &#x27;./components/Com&#x27;<br>export default &#123;<br>  data()&#123;<br>    return &#123;<br>      show: true<br>    &#125;<br>  &#125;,<br>  components: &#123;<br>    Life,<br>    UseAxios,<br>    More,<br>    Tick,<br>    [Com.name]: Com // 对象里的key是变量的话[]属性名表达式<br>    // &quot;ComNameHaHa&quot;: Com<br>  &#125;<br>&#125;<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure></li>
</ol>
<h2 id="四、案例-购物车"><a href="#四、案例-购物车" class="headerlink" title="四、案例 - 购物车"></a>四、案例 - 购物车</h2><p><img src="http://image.zhangyc.top/img/%E8%B4%AD%E7%89%A9%E8%BD%A6%E5%85%A8%E6%95%88%E6%9E%9C.gif" srcset="/img/loading.gif" lazyload alt="购物车全效果"></p>
<h3 id="4-1-案例-购物车-项目初始化"><a href="#4-1-案例-购物车-项目初始化" class="headerlink" title="4.1 案例-购物车-项目初始化"></a>4.1 案例-购物车-项目初始化</h3><blockquote>
<p>目标: 下载bootstrap库, 下载less模块</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash"><br>npm i bootstrap<br>npm i less less-loader@5.0.0 -D<br></code></pre></td></tr></table></figure>

<ol>
<li>在main.js中引入bootStrap库</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> <span class="hljs-string">&quot;bootstrap/dist/css/bootstrap.css&quot;</span> <span class="hljs-comment">// 引入第三方包里的某个css文件</span><br></code></pre></td></tr></table></figure>

<ol start="2">
<li>按照需求, 把项目页面拆分成几个组件, 在components下创建</li>
</ol>
<ul>
<li><p>MyHeader组件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div class=&quot;my-header&quot;&gt;购物车案例&lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>export default &#123;<br><br>&#125;<br>&lt;/script&gt;<br><br>&lt;style lang=&quot;less&quot; scoped&gt;<br>  .my-header &#123;<br>    height: 45px;<br>    line-height: 45px;<br>    text-align: center;<br>    background-color: #1d7bff;<br>    color: #fff;<br>    position: fixed;<br>    top: 0;<br>    left: 0;<br>    width: 100%;<br>    z-index: 2;<br>  &#125;<br>&lt;/style&gt;<br></code></pre></td></tr></table></figure>
</li>
<li><p>MyFooter组件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;!-- 底部 --&gt;<br>  &lt;div class=&quot;my-footer&quot;&gt;<br>    &lt;!-- 全选 --&gt;<br>    &lt;div class=&quot;custom-control custom-checkbox&quot;&gt;<br>      &lt;input type=&quot;checkbox&quot; class=&quot;custom-control-input&quot; id=&quot;footerCheck&quot;&gt;<br>      &lt;label class=&quot;custom-control-label&quot; for=&quot;footerCheck&quot;&gt;全选&lt;/label&gt;<br>    &lt;/div&gt;<br>    &lt;!-- 合计 --&gt;<br>    &lt;div&gt;<br>      &lt;span&gt;合计:&lt;/span&gt;<br>      &lt;span class=&quot;price&quot;&gt;¥ 0&lt;/span&gt;<br>    &lt;/div&gt;<br>    &lt;!-- 按钮 --&gt;<br>    &lt;button type=&quot;button&quot; class=&quot;footer-btn btn btn-primary&quot;&gt;结算 ( 0 )&lt;/button&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>export default &#123;<br><br>&#125;<br>&lt;/script&gt;<br><br>&lt;style lang=&quot;less&quot; scoped&gt;<br>.my-footer &#123;<br>  position: fixed;<br>  z-index: 2;<br>  bottom: 0;<br>  width: 100%;<br>  height: 50px;<br>  border-top: 1px solid #ccc;<br>  display: flex;<br>  justify-content: space-between;<br>  align-items: center;<br>  padding: 0 10px;<br>  background: #fff;<br><br>  .price &#123;<br>    color: red;<br>    font-weight: bold;<br>    font-size: 15px;<br>  &#125;<br><br>  .footer-btn &#123;<br>    min-width: 80px;<br>    height: 30px;<br>    line-height: 30px;<br>    border-radius: 25px;<br>    padding: 0;<br>  &#125;<br>&#125;<br>&lt;/style&gt;<br></code></pre></td></tr></table></figure>
</li>
<li><p>MyGoods组件 - 商品</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div class=&quot;my-goods-item&quot;&gt;<br>    &lt;div class=&quot;left&quot;&gt;<br>      &lt;div class=&quot;custom-control custom-checkbox&quot;&gt;<br>        &lt;input type=&quot;checkbox&quot; class=&quot;custom-control-input&quot; id=&quot;input&quot;<br>        &gt;<br>        &lt;label class=&quot;custom-control-label&quot; for=&quot;input&quot;&gt;<br>          &lt;img src=&quot;http://fuss10.elemecdn.com/e/5d/4a731a90594a4af544c0c25941171jpeg.jpeg&quot; alt=&quot;&quot;&gt;<br>        &lt;/label&gt;<br>      &lt;/div&gt;<br>    &lt;/div&gt;<br>    &lt;div class=&quot;right&quot;&gt;<br>      &lt;div class=&quot;top&quot;&gt;商品名字&lt;/div&gt;<br>      &lt;div class=&quot;bottom&quot;&gt;<br>        &lt;span class=&quot;price&quot;&gt;¥ 100&lt;/span&gt;<br>        &lt;span&gt;<br>            数量组件<br>        &lt;/span&gt;<br>      &lt;/div&gt;<br>    &lt;/div&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>export default &#123;<br><br>&#125;<br>&lt;/script&gt;<br><br>&lt;style lang=&quot;less&quot; scoped&gt;<br>.my-goods-item &#123;<br>  display: flex;<br>  padding: 10px;<br>  border-bottom: 1px solid #ccc;<br>  .left &#123;<br>    img &#123;<br>      width: 120px;<br>      height: 120px;<br>      margin-right: 8px;<br>      border-radius: 10px;<br>    &#125;<br>    .custom-control-label::before,<br>    .custom-control-label::after &#123;<br>      top: 50px;<br>    &#125;<br>  &#125;<br>  .right &#123;<br>    flex: 1;<br>    display: flex;<br>    flex-direction: column;<br>    justify-content: space-between;<br>    .top&#123;<br>        font-size: 14px;<br>        font-weight: 700;<br>    &#125;<br>    .bottom &#123;<br>      display: flex;<br>      justify-content: space-between;<br>      padding: 5px 0;<br>      align-items: center;<br>      .price &#123;<br>        color: red;<br>        font-weight: bold;<br>      &#125;<br>    &#125;<br>  &#125;<br>&#125;<br><br>&lt;/style&gt;<br></code></pre></td></tr></table></figure>
</li>
<li><p>MyCount组件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div class=&quot;my-counter&quot;&gt;<br>    &lt;button type=&quot;button&quot; class=&quot;btn btn-light&quot;&gt;-&lt;/button&gt;<br>    &lt;input type=&quot;number&quot; class=&quot;form-control inp&quot; v-model=&quot;num&quot;&gt;<br>    &lt;button type=&quot;button&quot; class=&quot;btn btn-light&quot;&gt;+&lt;/button&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>export default &#123;<br>  data() &#123;<br>    return &#123;<br>      num: 1<br>    &#125;<br>  &#125;,<br>&#125;<br>&lt;/script&gt;<br><br>&lt;style lang=&quot;less&quot; scoped&gt;<br>.my-counter &#123;<br>  display: flex;<br><br>  .inp &#123;<br>    width: 45px;<br>    text-align: center;<br>    margin: 0 10px;<br>  &#125;<br><br>  .btn,<br>  .inp &#123;<br>    transform: scale(0.9);<br>  &#125;<br>&#125;<br>&lt;/style&gt;Copy to clipboardErrorCopied<br></code></pre></td></tr></table></figure></li>
</ul>
<ol>
<li><p>依次引入到App.vue中</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div&gt;<br>    &lt;MyHeader&gt;&lt;/MyHeader&gt;<br>      &lt;MyGoods&gt;&lt;/MyGoods&gt;<br>    &lt;MyFooter&gt;&lt;/MyFooter&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>// 目标: 项目初始化 - 静态页面<br>// 1. 创建项目, 下包, 引入bs样式<br>// 2. 拆分需求组件, 创建 - 分别标签+样式<br>// 3. App.vue上显示, 微调样式(上下内边距)<br>import MyHeader from &#x27;./components/MyHeader&#x27;<br>import MyGoods from &#x27;./components/MyGoods&#x27;<br>import MyFooter from &#x27;./components/MyFooter&#x27;<br>export default &#123;<br>  components: &#123;<br>    MyHeader,<br>    MyGoods,<br>    MyFooter<br>  &#125;,<br>&#125;<br>&lt;/script&gt;<br><br>&lt;style&gt;<br>&lt;/style&gt;Copy to clipboardErrorCopied<br></code></pre></td></tr></table></figure>
</li>
<li><p>MyGoods.vue中需要插入MyCount.vue数量组件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;span&gt;<br>    &lt;!-- 插入数量组件 --&gt;<br>    &lt;MyCount&gt;&lt;/MyCount&gt;<br>&lt;/span&gt;<br><br>&lt;script&gt;<br>import MyCount from &#x27;./MyCount.vue&#x27;<br>export default &#123;<br>  components: &#123;<br>    MyCount<br>  &#125;<br>&#125;<br>&lt;/script&gt;Copy to clipboardErrorCopied<br></code></pre></td></tr></table></figure>
</li>
<li><p>微调样式</p>
<p>发现页面会脱离文档流， 需要在App.vue里设置一个盒子包裹整个内容部分</p>
<p><img src="https://restianootbook.netlify.app/06-vue%E5%9F%BA%E7%A1%80/vue05/vue05/images/image-20220610132943432.png" srcset="/img/loading.gif" lazyload alt="image-20220610132943432"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div&gt;<br>    &lt;MyHeader&gt;&lt;/MyHeader&gt;<br>    &lt;div class=&quot;main&quot;&gt;<br>      &lt;MyGoods&gt;&lt;/MyGoods&gt;<br>    &lt;/div&gt;<br>    &lt;MyFooter&gt;&lt;/MyFooter&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;style scoped&gt;<br>    .main &#123;<br>      padding-top: 45px;<br>      padding-bottom: 50px;<br>    &#125;<br>&lt;/style&gt;<br></code></pre></td></tr></table></figure></li>
</ol>
<p>总结：拿到项目需求需要以下分析</p>
<ol>
<li>新建项目-下载需要的包</li>
<li>分析, 拆分, 创建组件</li>
<li>准备静态标签</li>
<li>组件使用到页面</li>
</ol>
<h3 id="4-2-头部自定义"><a href="#4-2-头部自定义" class="headerlink" title="4.2 头部自定义"></a>4.2 头部自定义</h3><blockquote>
<p>目的: 头部的标题, 颜色, 背景色可以随便修改, props类型的校验</p>
<p>简单来说就是使用父组件提供的参数来改变头部的样式</p>
</blockquote>
<p><img src="https://restianootbook.netlify.app/06-vue%E5%9F%BA%E7%A1%80/vue05/vue05/images/image-20220610133341667.png" srcset="/img/loading.gif" lazyload alt="image-20220610133341667"></p>
<p><strong>思路：</strong></p>
<ol>
<li>在MyHeader.vue中准备props里变量, 然后使用</li>
<li>在使用MyHeader.vue组件时, 传入相应的值 (color和backgroundColor)<ul>
<li>其中文字颜色color设置默认值</li>
</ul>
</li>
<li>传入标题文字内容定义<ul>
<li>文字要求为必传项</li>
</ul>
</li>
</ol>
<p><strong>MyHeader.vue</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div class=&quot;my-header&quot; :style=&quot;&#123; backgroundColor: background, color &#125;&quot;&gt;&#123;&#123; title &#125;&#125;&lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>export default &#123;<br>  props: &#123;<br>    background: String, // 外部插入此变量的值, 必须是字符串类型, 否则报错<br>    color: &#123;<br>      type: String, // 约束color值的类型<br>      default: &quot;#fff&quot; // color变量默认值(外部不给 我color传值, 使用默认值)<br>    &#125;,<br>    title: &#123;<br>      type: String,<br>      required: true // 必须传入此变量的值<br>    &#125;<br>  &#125;<br>&#125;<br>&lt;/script&gt;Copy to clipboardErrorCopied<br></code></pre></td></tr></table></figure>

<p>App.vue传入相应自定义的值</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;MyHeader title=&quot;购物车案例&quot;&gt;&lt;/MyHeader&gt;Copy to clipboardErrorCopied<br></code></pre></td></tr></table></figure>

<blockquote>
<p>总结:</p>
<p>props: [] - 只能声明变量和接收, 不能类型校验</p>
<p>props: {} - 声明变量和校验类型规则 - 外部传入值不对则报错</p>
</blockquote>
<h3 id="4-3-请求数据"><a href="#4-3-请求数据" class="headerlink" title="4.3 请求数据"></a>4.3 请求数据</h3><blockquote>
<p>目标: 使用axios把数据请求回来</p>
</blockquote>
<p>数据地址: <a target="_blank" rel="noopener" href="https://www.escook.cn/api/cart">https://www.escook.cn/api/cart</a> (get方式)</p>
<p>分析：</p>
<p>①：下载axios，在main.js中引入</p>
<p>②：配置基础地质： <a target="_blank" rel="noopener" href="https://www.escook.cn/">https://www.escook.cn</a></p>
<p>③：axios挂载到Vue原型上，作为全局属性</p>
<p>④：App.vue的created中使用全局属性axios</p>
<p>步骤:</p>
<ol>
<li><p>下载axios</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">yarn add axiosCopy to clipboardErrorCopied<br></code></pre></td></tr></table></figure>
</li>
<li><p>main.js - 原型上挂载</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> <span class="hljs-title class_">Vue</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./App.vue&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-string">&quot;bootstrap/dist/css/bootstrap.css&quot;</span> <span class="hljs-comment">// 引入第三方包里的某个css文件</span><br><br><span class="hljs-title class_">Vue</span>.<span class="hljs-property">config</span>.<span class="hljs-property">productionTip</span> = <span class="hljs-literal">false</span><br><br><span class="hljs-comment">// 目标: 请求数据 - 打印</span><br><span class="hljs-comment">// 1. 下载axios库, main.js - 全局绑定属性 (确保任意.vue文件可以都访问到这个axios方法)</span><br><span class="hljs-keyword">import</span> axios <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;axios&#x27;</span><br><span class="hljs-comment">// 2. 基础地址</span><br>axios.<span class="hljs-property">defaults</span>.<span class="hljs-property">baseURL</span> = <span class="hljs-string">&quot;https://www.escook.cn&quot;</span><br><span class="hljs-comment">// 3. axios方法添加到Vue的原型上</span><br><span class="hljs-title class_">Vue</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">$axios</span> = axios<br><br><span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;<br>  <span class="hljs-attr">render</span>: <span class="hljs-function"><span class="hljs-params">h</span> =&gt;</span> <span class="hljs-title function_">h</span>(<span class="hljs-title class_">App</span>),<br>&#125;).$mount(<span class="hljs-string">&#x27;#app&#x27;</span>)<span class="hljs-title class_">Copy</span> to clipboardErrorCopied<br></code></pre></td></tr></table></figure>
</li>
<li><p>App.vue中使用请求</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script&gt;<br>export default &#123;<br>  components: &#123;<br>    MyHeader,<br>    MyGoods,<br>    MyFooter<br>  &#125;,<br>  data() &#123;<br>    return &#123;<br>      list: [] // 商品所有数据<br>    &#125;<br>  &#125;,<br><br>  created() &#123;<br>    // 获取购物车数据列表<br>    this.getList()<br>  &#125;,<br><br>  methods: &#123;<br>    // 获取购物车数据列表<br>    getList() &#123;<br>      this.$axios(&#123;<br>        methods: &#x27;GET&#x27;,<br>        url: &quot;/api/cart&quot;<br>      &#125;).then(res =&gt; &#123;<br>        console.log(res);<br>        this.list = res.data.list<br>        console.log(this.list)<br>      &#125;)<br>    &#125;<br>  &#125;,<br>&#125;<br>&lt;/script&gt;Copy to clipboardErrorCopied<br></code></pre></td></tr></table></figure></li>
</ol>
<blockquote>
<p>总结: 可以将axios配置到全局, 这样调用接口时可以省去每次都去引用axios，减少无用代码量</p>
</blockquote>
<h3 id="4-4-数据渲染"><a href="#4-4-数据渲染" class="headerlink" title="4.4 数据渲染"></a>4.4 数据渲染</h3><blockquote>
<p>目标: 把上面请求的数据, 铺设到页面上</p>
</blockquote>
<p>步骤：</p>
<ol>
<li><p>App.vue 上通过列表数据，遍历组件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div&gt;<br>    &lt;MyHeader title=&quot;购物车案例&quot;&gt;&lt;/MyHeader&gt;<br>    &lt;div class=&quot;main&quot;&gt;<br>      &lt;MyGoods v-for=&quot;obj in list&quot; :key=&quot;obj.id&quot; :dataList=&quot;obj&quot;&gt;&lt;/MyGoods&gt;<br>    &lt;/div&gt;<br>    &lt;MyFooter&gt;&lt;/MyFooter&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;Copy to clipboardErrorCopied<br></code></pre></td></tr></table></figure>
</li>
<li><p>MyGoods.vue 中将数据动态配置到对应标签中</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div class=&quot;my-goods-item&quot;&gt;<br>    &lt;div class=&quot;left&quot;&gt;<br>      &lt;div class=&quot;custom-control custom-checkbox&quot;&gt;<br>        &lt;!-- *重要:<br>          每个对象和组件都是独立的<br>          对象里的goods_state关联自己对应商品的复选框<br>         --&gt;<br>        &lt;input type=&quot;checkbox&quot; class=&quot;custom-control-input&quot; :id=&quot;goodsData.id&quot; v-model=&quot;goodsDataClone.goods_state&quot;&gt;<br>        &lt;label class=&quot;custom-control-label&quot;&gt;<br>          &lt;img :src=&quot;goodsData.goods_img&quot; alt=&quot;&quot;&gt;<br>        &lt;/label&gt;<br>      &lt;/div&gt;<br>    &lt;/div&gt;<br>    &lt;div class=&quot;right&quot;&gt;<br>      &lt;div class=&quot;top&quot;&gt;&#123;&#123; goodsData.goods_name &#125;&#125;&lt;/div&gt;<br>      &lt;div class=&quot;bottom&quot;&gt;<br>        &lt;span class=&quot;price&quot;&gt;¥ &#123;&#123; goodsData.goods_price &#125;&#125;&lt;/span&gt;<br>        &lt;span&gt;<br>          &lt;MyCount :obj=&quot;goodsData&quot;&gt;&lt;/MyCount&gt;<br>        &lt;/span&gt;<br>      &lt;/div&gt;<br>    &lt;/div&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>    import MyCount from &#x27;./MyCount.vue&#x27;<br>    export default &#123;<br>        components: &#123;<br>            MyCount<br>        &#125;,<br>        props: &#123;<br>            goodsData: &#123;<br>                typeof: Object,<br>                default: () =&gt; (&#123;&#125;)<br>            &#125;<br>        &#125;,<br>        data() &#123;<br>            return &#123;<br>                goodsDataClone: this.goodsData<br>            &#125;<br>        &#125;,<br>    &#125;<br>&lt;/script&gt;Copy to clipboardErrorCopied<br></code></pre></td></tr></table></figure>
</li>
<li><p>将数据传给MyCount.vue组件，让数据驱动数量选择</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div class=&quot;my-counter&quot;&gt;<br>    &lt;button type=&quot;button&quot; class=&quot;btn btn-light&quot;&gt;-&lt;/button&gt;<br>    &lt;input type=&quot;number&quot; class=&quot;form-control inp&quot; v-model.number=&quot;goodsDataClone.goods_count&quot;&gt;<br>    &lt;button type=&quot;button&quot; class=&quot;btn btn-light&quot;&gt;+&lt;/button&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>    export default &#123;<br>        props: &#123;<br>            goodsData: &#123;<br>                typeof: Object,<br>                default: () =&gt; (&#123;&#125;)<br>            &#125;<br>        &#125;<br>        data() &#123;<br>            return &#123;<br>                goodsDataClone: this.goodsData<br>            &#125;<br>        &#125;,<br>    &#125;<br>&lt;/script&gt;Copy to clipboardErrorCopied<br></code></pre></td></tr></table></figure></li>
</ol>
<h3 id="4-5-商品选中"><a href="#4-5-商品选中" class="headerlink" title="4.5 商品选中"></a>4.5 商品选中</h3><blockquote>
<p>给label设置for属性</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs VUE">&lt;input type=&quot;checkbox&quot; class=&quot;custom-control-input&quot; :id=&quot;goodsData.id&quot;<br>       v-model=&quot;goodsDataClone.goods_state&quot;<br>       &gt;<br>&lt;label class=&quot;custom-control-label&quot; :for=&quot;goodsData.id&quot;&gt;<br>    &lt;img :src=&quot;goodsData.goods_img&quot; alt=&quot;&quot;&gt;<br>&lt;/label&gt;Copy to clipboardErrorCopied<br></code></pre></td></tr></table></figure>

<h3 id="4-6-数量控制"><a href="#4-6-数量控制" class="headerlink" title="4.6 数量控制"></a>4.6 数量控制</h3><blockquote>
<p>目标: 点击+和-或者直接修改输入框的值影响商品购买的数量</p>
<p>注意： 数量不可以小于0</p>
</blockquote>
<p>分析：</p>
<p>①：给MyCount组件传入数据对象关联</p>
<p>②：输入框v-model关联对象里数量属性</p>
<p>③：增加或减少修改对象数量属性</p>
<p>④：控制商品最少一件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div class=&quot;my-counter&quot;&gt;<br>    &lt;!-- 1. 减少到1时，禁用减少按钮，点击事件也要做限制 --&gt;<br>    &lt;button type=&quot;button&quot; class=&quot;btn btn-light&quot; :disabled=&quot;goodsDataClone.goods_count === 1&quot;<br>      @click=&quot;goodsDataClone.goods_count &gt; 1 &amp;&amp; goodsDataClone.goods_count--&quot;&gt;-&lt;/button&gt;<br>    &lt;input type=&quot;number&quot; class=&quot;form-control inp&quot; v-model.number=&quot;goodsDataClone.goods_count&quot;&gt;<br>    &lt;!-- 2. 点击增加，数量加一 --&gt;<br>    &lt;button type=&quot;button&quot; class=&quot;btn btn-light&quot; @click=&quot;goodsDataClone.goods_count++&quot;&gt;+&lt;/button&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>export default &#123;<br>    props: &#123;<br>        goodsData: &#123;<br>            typeof: Object,<br>            default: () =&gt; (&#123;&#125;)<br>        &#125;<br>    &#125;,<br><br>    data() &#123;<br>        return &#123;<br>            goodsDataClone: this.goodsData<br>        &#125;<br>    &#125;,<br><br>    // 通过数据监听，如果手动输入小鱼1的数字时，强制修改为1<br>    watch: &#123;<br>        goodsDataClone: &#123;<br>            deep: true,<br>            immediate: true,<br>            handler() &#123; // 拿到商品数量, 判断小于1, 强制修改成1<br>                if (this.goodsDataClone.goods_count &lt; 1) &#123;<br>                    this.goodsDataClone.goods_count = 1<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br>&lt;/script&gt;Copy to clipboardErrorCopied<br></code></pre></td></tr></table></figure>

<p>④：App.vue的created中使用全局属性axios</p>
<p><strong>总结：</strong></p>
<ol>
<li>通过watch事件，监听控制输入框值的合法性，强制覆盖为正确的值</li>
<li>对象传参会引用相同的堆内存</li>
</ol>
<h3 id="4-7-全选功能"><a href="#4-7-全选功能" class="headerlink" title="4.7 全选功能"></a>4.7 全选功能</h3><blockquote>
<p>目标: 在底部组件上, 完成全选功能</p>
</blockquote>
<p><img src="https://restianootbook.netlify.app/06-vue%E5%9F%BA%E7%A1%80/vue05/vue05/images/image-20210223141427684.png" srcset="/img/loading.gif" lazyload alt="image-20210223141427684"></p>
<p>分析：</p>
<ol>
<li>通过计算属性，关联数据列表和全选框状态</li>
<li>在set方法中获取到全选关系</li>
<li>根据小选框的选择数量改变全选框状态</li>
<li>根据全选框修改小选框状态</li>
</ol>
<p>步骤：</p>
<ol>
<li><p>在MyFooter.vue中配置计算属性</p>
</li>
<li><p>根据小选框的选择数量改变全选框状态</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;!-- 底部 --&gt;<br>  &lt;div class=&quot;my-footer&quot;&gt;<br>    &lt;!-- 全选 --&gt;<br>    &lt;div class=&quot;custom-control custom-checkbox&quot;&gt;<br>      &lt;input type=&quot;checkbox&quot; class=&quot;custom-control-input&quot; id=&quot;footerCheck&quot; v-model=&quot;isAll&quot;&gt;<br>      &lt;label class=&quot;custom-control-label&quot; for=&quot;footerCheck&quot;&gt;全选&lt;/label&gt;<br>    &lt;/div&gt;<br>    &lt;!-- 合计 --&gt;<br>    &lt;div&gt;<br>      &lt;span&gt;合计:&lt;/span&gt;<br>      &lt;span class=&quot;price&quot;&gt;¥ 0&lt;/span&gt;<br>    &lt;/div&gt;<br>    &lt;!-- 按钮 --&gt;<br>    &lt;button type=&quot;button&quot; class=&quot;footer-btn btn btn-primary&quot;&gt;结算 ( 0 )&lt;/button&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>    // 目标: 全选<br>    // 1. v-model关联全选-复选框(v-model后变量计算属性)<br>    // 2. 页面(视频层)v(true) -&gt; 数据层(变量-) 计算属性(完整写法)<br><br>    // 小选  -&gt; 全选<br>    // App.vue里list数组 -&gt; MyFooter.vue<br>    // isAll的get方法里, 统计状态影响全选框<br>    export default &#123;<br>        props: &#123;<br>            arr: &#123;<br>                type: Array,<br>                default: () =&gt; []<br>            &#125;<br>        &#125;,<br>        computed: &#123;<br>            isAll: &#123;<br>                set(val) &#123; // val就是关联表单的值(true/false)<br>                    console.log(val)<br>                &#125;,<br>                get() &#123;<br>                    // 查找小选框关联的属性有没有不符合勾选的条件<br>                    // 直接原地false<br>                    return this.arr.every(obj =&gt; obj.goods_state === true)<br>                &#125;<br>            &#125;,<br>        &#125;<br>    &#125;<br>&lt;/script&gt;Copy to clipboardErrorCopied<br></code></pre></td></tr></table></figure>
</li>
<li><p>根据全选框状态修改小选框状态</p>
<p>App.vue</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;MyFooter @changeAll=&quot;allFn&quot; :arr=&quot;list&quot;&gt;&lt;/MyFooter&gt;Copy to clipboardErrorCopied<br></code></pre></td></tr></table></figure>

<p>MyFooter.vue</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script&gt;<br>// 目标: 全选<br>// 1. v-model关联全选-复选框(v-model后变量计算属性)<br>// 2. 页面(视频层)v(true) -&gt; 数据层(变量-) 计算属性(完整写法)<br>// 3. 把全选 true/false同步给所有小选框选中状态上<br><br>// 小选  -&gt; 全选<br>// App.vue里list数组 -&gt; MyFooter.vue<br>// isAll的get方法里, 统计状态影响全选框<br>export default &#123;<br>  props: &#123;<br>    arr: &#123;<br>      type: Array,<br>      default: () =&gt; []<br>    &#125;<br>  &#125;,<br>  computed: &#123;<br>    isAll: &#123;<br>      set(val) &#123; // val就是关联表单的值(true/false)<br>        this.$emit(&#x27;changeAll&#x27;, val)<br>      &#125;,<br>      get() &#123;<br>        // 查找小选框关联的属性有没有不符合勾选的条件<br>        // 直接原地false<br>        return this.arr.every(obj =&gt; obj.goods_state === true)<br>      &#125;<br>    &#125;,<br>  &#125;<br>&#125;<br>&lt;/script&gt;Copy to clipboardErrorCopied<br></code></pre></td></tr></table></figure></li>
</ol>
<h3 id="4-8-总数量"><a href="#4-8-总数量" class="headerlink" title="4.8 总数量"></a>4.8 总数量</h3><blockquote>
<p>目标: 完成底部组件, 显示选中的商品的总数量</p>
</blockquote>
<p>设置计算属性，来汇总列表list中的所有选中商品个数</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;!-- 底部 --&gt;<br>  &lt;div class=&quot;my-footer&quot;&gt;<br>    &lt;!-- 合计 --&gt;<br>    &lt;div&gt;<br>      &lt;span&gt;合计:&lt;/span&gt;<br>      &lt;span class=&quot;price&quot;&gt;&#123;&#123; allCount &#125;&#125;&lt;/span&gt;<br>    &lt;/div&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>// 目标: 全选<br>// 1. v-model关联全选-复选框(v-model后变量计算属性)<br>// 2. 页面(视频层)v(true) -&gt; 数据层(变量-) 计算属性(完整写法)<br>// 3. 把全选 true/false同步给所有小选框选中状态上<br><br>// 小选  -&gt; 全选<br>// App.vue里list数组 -&gt; MyFooter.vue<br>// isAll的get方法里, 统计状态影响全选框<br><br>// 目标: 总数量统计<br>// 1. allCount计算属性用 数组reduce+判断统计数量并返回<br>export default &#123;<br>  props: &#123;<br>    arr: &#123;<br>      type: Array,<br>      default: () =&gt; []<br>    &#125;<br>  &#125;,<br>  computed: &#123;<br>    allCount() &#123;<br>      return this.arr.reduce((sum, obj) =&gt; &#123;<br>        if (obj.goods_state === true) &#123; // 选中商品才累加数量<br>          sum += obj.goods_count<br>        &#125;<br>        return sum<br>      &#125;, 0)<br>    &#125;,<br>  &#125;<br>&#125;<br>&lt;/script&gt;Copy to clipboardErrorCopied<br></code></pre></td></tr></table></figure>

<h3 id="4-9-总价"><a href="#4-9-总价" class="headerlink" title="4.9 总价"></a>4.9 总价</h3><blockquote>
<p>目标: 完成选中商品计算价格</p>
</blockquote>
<p>设置计算属性，来汇总列表list中的所有选中商品的价格</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;!-- 底部 --&gt;<br>  &lt;div class=&quot;my-footer&quot;&gt;<br>    &lt;!-- 按钮 --&gt;<br>    &lt;button type=&quot;button&quot; class=&quot;footer-btn btn btn-primary&quot;&gt;结算 ( &#123;&#123; allPrice &#125;&#125; )&lt;/button&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>// 目标: 全选<br>// 1. v-model关联全选-复选框(v-model后变量计算属性)<br>// 2. 页面(视频层)v(true) -&gt; 数据层(变量-) 计算属性(完整写法)<br>// 3. 把全选 true/false同步给所有小选框选中状态上<br><br>// 小选  -&gt; 全选<br>// App.vue里list数组 -&gt; MyFooter.vue<br>// isAll的get方法里, 统计状态影响全选框<br><br>// 目标: 总数量统计<br>// 1. allCount计算属性用 数组reduce+判断统计数量并返回<br><br>// 目标: 总价<br>// allPrice计算属性, 数组reduce+单价*数量, 判断选中, 才累加后返回<br>export default &#123;<br>  props: &#123;<br>    arr: &#123;<br>      type: Array,<br>      default: () =&gt; []<br>    &#125;<br>  &#125;,<br>  computed: &#123;<br>    allPrice() &#123;<br>      return this.arr.reduce((sum, obj) =&gt; &#123;<br>        if (obj.goods_state) &#123;<br>          sum += obj.goods_count * obj.goods_price<br>        &#125;<br>        return sum;<br>      &#125;, 0)<br>    &#125;<br>  &#125;<br>&#125;<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure>

<h3 id="4-10-代码块"><a href="#4-10-代码块" class="headerlink" title="4.10 代码块"></a>4.10 代码块</h3><blockquote>
<p>main.js</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> <span class="hljs-title class_">Vue</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./App.vue&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-string">&quot;bootstrap/dist/css/bootstrap.css&quot;</span> <span class="hljs-comment">// 引入第三方包里的某个css文件</span><br><br><span class="hljs-title class_">Vue</span>.<span class="hljs-property">config</span>.<span class="hljs-property">productionTip</span> = <span class="hljs-literal">false</span><br><br><span class="hljs-comment">// 全局引入axios</span><br><span class="hljs-keyword">import</span> axios <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;axios&#x27;</span><br>axios.<span class="hljs-property">defaults</span>.<span class="hljs-property">baseURL</span> = <span class="hljs-string">&quot;https://www.escook.cn&quot;</span><br><span class="hljs-comment">// 自定义 Vue 实例的内部方法 - &#x27;$axios&#x27;</span><br><span class="hljs-title class_">Vue</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">$axios</span> = axios<br><br><span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;<br>  <span class="hljs-attr">render</span>: <span class="hljs-function"><span class="hljs-params">h</span> =&gt;</span> <span class="hljs-title function_">h</span>(<span class="hljs-title class_">App</span>),<br>&#125;).$mount(<span class="hljs-string">&#x27;#app&#x27;</span>)<br><br></code></pre></td></tr></table></figure>

<blockquote>
<p>App.vue</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div&gt;<br>    &lt;MyHeader title=&quot;购物车&quot;&gt;&lt;/MyHeader&gt;<br>    &lt;div class=&quot;main&quot;&gt;<br>      &lt;MyGoods v-for=&quot;obj in list&quot; :key=&quot;obj.id&quot; :dataObj=&quot;obj&quot;&gt;&lt;/MyGoods&gt;<br>    &lt;/div&gt;<br>    &lt;MyFooter :list=&quot;list&quot;&gt;&lt;/MyFooter&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br>/*  */<br>&lt;script&gt;<br>// 目标: 项目初始化 - 静态页面<br>// 1. 创建项目, 下包, 引入bs样式<br>// 2. 拆分需求组件, 创建 - 分别标签+样式<br>// 3. App.vue上显示, 微调样式(上下内边距)<br>/*  目标1： 头部导航的动态样式设置<br>    原因： 一个项目中可能有很多的页面都有头部导航，我们可以公用一个头部导航组件，<br>          通过父组件的不同参数来修改头部导航中的某些样式内容<br>      1. 自定义文本<br>      2. 自定义导航的背景颜色<br>      3. 自定义文本的颜色 <br>*/<br>/*  目标2； 想后端请求列表数据并铺设到页面上<br>      1.通过npm i axios 下载 axios模块<br>      2.引入axios （1. 全局引入 2. 局部引入）<br>      3.调用接口获取数据 =》 获取得到的数据需要放到data变量中<br>*/<br>/*  目标3： 产品数量的控制<br>    1. 减少控件： 点击一次减少1，如果当前数量小于等于1时，不可减少且按钮禁用（disabled）<br>    2. 增加控件:  点击一次增加1<br>    3. 输入框控件： <br>      3.1 只可输入数字 .number<br>      3.2 内容只能是大于等于1的值，如果违背这一条规则，则强制修改为1<br><br>*/<br>import MyHeader from &quot;./components/MyHeader&quot;;<br>import MyGoods from &quot;./components/MyGoods&quot;;<br>import MyFooter from &quot;./components/MyFooter&quot;;<br>export default &#123;<br>  components: &#123;<br>    MyHeader,<br>    MyGoods,<br>    MyFooter,<br>  &#125;,<br>  data() &#123;<br>    return &#123;<br>      list: [],<br>    &#125;;<br>  &#125;,<br>  created() &#123;<br>    // 获取购物车列表数据<br>    this.getShopCarList();<br>  &#125;,<br>  methods: &#123;<br>    getShopCarList() &#123;<br>      // 请求接口<br>      this.$axios(&#123;<br>        method: &quot;GET&quot;,<br>        url: &quot;/api/cart&quot;,<br>      &#125;).then((res) =&gt; &#123;<br>        this.list = res.data.list;<br>        console.log(this.list);<br>      &#125;);<br>    &#125;,<br>  &#125;,<br>&#125;;<br>&lt;/script&gt;<br><br>&lt;style  scoped&gt;<br>.main &#123;<br>  padding-top: 45px;<br>  padding-bottom: 50px;<br>&#125;<br>&lt;/style&gt;&gt;<br></code></pre></td></tr></table></figure>

<blockquote>
<p>components&#x2F;MyHeader.vue</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div class=&quot;my-header&quot; :style=&quot;&#123;color: color, backgroundColor: bgColor&#125;&quot;&gt;&#123;&#123; title &#125;&#125;&lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>export default &#123;<br>  name: &quot;MyHeader&quot;,<br>  props: &#123;<br>    title: &#123;<br>      type: String,<br>      default: &quot;标题&quot;,<br>    &#125;,<br>    color:&#123;<br>      type:String,<br>      default:&#x27;white&#x27;,<br>    &#125;,<br>    bgColor:&#123;<br>      type:String,<br>      default:&#x27;#1d7bff&#x27;,<br>    &#125;<br>  &#125;,<br>&#125;;<br>&lt;/script&gt;<br><br>&lt;style lang=&quot;less&quot; scoped&gt;<br>.my-header &#123;<br>  height: 45px;<br>  line-height: 45px;<br>  text-align: center;<br>  background-color: #1d7bff;<br>  color: #fff;<br>  position: fixed;<br>  top: 0;<br>  left: 0;<br>  width: 100%;<br>  z-index: 2;<br>&#125;<br>&lt;/style&gt;<br></code></pre></td></tr></table></figure>



<blockquote>
<p>components&#x2F;MyGoods.vue</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div class=&quot;my-goods-item&quot;&gt;<br>    &lt;div class=&quot;left&quot;&gt;<br>      &lt;div class=&quot;custom-control custom-checkbox&quot;&gt;<br>        &lt;input<br>          type=&quot;checkbox&quot;<br>          class=&quot;custom-control-input&quot;<br>          :id=&quot;dataObj.id&quot;<br>          v-model=&quot;dataObjClone.goods_state&quot;<br>        /&gt;<br>        &lt;label class=&quot;custom-control-label&quot; :for=&quot;dataObj.id&quot;&gt;<br>          &lt;img :src=&quot;dataObj.goods_img&quot; alt=&quot;&quot; /&gt;<br>        &lt;/label&gt;<br>      &lt;/div&gt;<br>    &lt;/div&gt;<br>    &lt;div class=&quot;right&quot;&gt;<br>      &lt;div class=&quot;top&quot;&gt;&#123;&#123; dataObj.goods_name &#125;&#125;&lt;/div&gt;<br>      &lt;div class=&quot;bottom&quot;&gt;<br>        &lt;span class=&quot;price&quot;&gt;¥ &#123;&#123; dataObj.goods_price &#125;&#125;&lt;/span&gt;<br>        &lt;span&gt;<br>          &lt;MyCount :dataObj=&quot;dataObj&quot;&gt;&lt;/MyCount&gt;<br>        &lt;/span&gt;<br>      &lt;/div&gt;<br>    &lt;/div&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>import MyCount from &quot;./MyCount.vue&quot;;<br>export default &#123;<br>  name: &quot;MyGoods&quot;,<br>  components: &#123;<br>    MyCount,<br>  &#125;,<br>  props: &#123;<br>    dataObj: &#123;<br>      type: Object,<br>      default: () =&gt; (&#123;&#125;),<br>    &#125;,<br>  &#125;,<br>  data() &#123;<br>    return &#123;<br>      dataObjClone: this.dataObj,<br>    &#125;;<br>  &#125;,<br>&#125;;<br>&lt;/script&gt;<br><br>&lt;style lang=&quot;less&quot; scoped&gt;<br>.my-goods-item &#123;<br>  display: flex;<br>  padding: 10px;<br>  border-bottom: 1px solid #ccc;<br>  .left &#123;<br>    img &#123;<br>      width: 120px;<br>      height: 120px;<br>      margin-right: 8px;<br>      border-radius: 10px;<br>    &#125;<br>    .custom-control-label::before,<br>    .custom-control-label::after &#123;<br>      top: 50px;<br>    &#125;<br>  &#125;<br>  .right &#123;<br>    flex: 1;<br>    display: flex;<br>    flex-direction: column;<br>    justify-content: space-between;<br>    .top &#123;<br>      font-size: 14px;<br>      font-weight: 700;<br>    &#125;<br>    .bottom &#123;<br>      display: flex;<br>      justify-content: space-between;<br>      padding: 5px 0;<br>      align-items: center;<br>      .price &#123;<br>        color: red;<br>        font-weight: bold;<br>      &#125;<br>    &#125;<br>  &#125;<br>&#125;<br>&lt;/style&gt;<br></code></pre></td></tr></table></figure>



<blockquote>
<p>components&#x2F;MyFooter.vue</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;!-- 底部 --&gt;<br>  &lt;div class=&quot;my-footer&quot;&gt;<br>    &lt;!-- 全选 --&gt;<br>    &lt;div class=&quot;custom-control custom-checkbox&quot;&gt;<br>      &lt;input<br>        type=&quot;checkbox&quot;<br>        class=&quot;custom-control-input&quot;<br>        id=&quot;footerCheck&quot;<br>        v-model=&quot;isAll&quot;<br>      /&gt;<br>      &lt;label class=&quot;custom-control-label&quot; for=&quot;footerCheck&quot;&gt;全选&lt;/label&gt;<br>    &lt;/div&gt;<br>    &lt;!-- 合计 --&gt;<br>    &lt;div&gt;<br>      &lt;span&gt;合计:&lt;/span&gt;<br>      &lt;span class=&quot;price&quot;&gt;¥ &#123;&#123; allPrice &#125;&#125;&lt;/span&gt;<br>    &lt;/div&gt;<br>    &lt;!-- 按钮 --&gt;<br>    &lt;button type=&quot;button&quot; class=&quot;footer-btn btn btn-primary&quot;&gt;<br>      结算 ( &#123;&#123; allCount &#125;&#125; )<br>    &lt;/button&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>export default &#123;<br>  name: &quot;MyFooter&quot;,<br>  props: &#123;<br>    list: &#123;<br>      type: Array,<br>      default: () =&gt; [],<br>    &#125;,<br>  &#125;,<br>  computed: &#123;<br>    &#x27;isAll&#x27;: &#123;<br>      // 完整写法中，set在99%的情况下的使用操作 - 让全选框影响小选框<br>      set(value) &#123;<br>        // console.log(value, &#x27;当前计算属性的值&#x27;)<br>        // value 表示的是当前isAll计算属性的值<br>        this.list.forEach((obj) =&gt; &#123;<br>          // 让所有的c属性，都变成当前的计算属性的值<br>          obj.goods_state = value;<br>        &#125;);<br>      &#125;,<br>      get() &#123;<br>        // every方法查找数组中不符合的条件，直接返回false<br>        // let flag = this.arr.every(obj =&gt; obj.c)<br>        let flag = this.list.every((obj) =&gt; &#123;<br>          // every判断数组中的每一个c属性是不是都是true有一个不是，就返回false<br>          return obj.goods_state === true;<br>        &#125;);<br>        return flag;<br>      &#125;,<br>    &#125;,<br>    &#x27;allCount&#x27;() &#123;<br>      let allSum = this.list.reduce((sum, obj) =&gt; &#123;<br>        if (obj.goods_state === true) &#123;<br>          sum += obj.goods_count;<br>        &#125;<br>        return sum;<br>      &#125;, 0);<br>      return allSum;<br>    &#125;,<br>    &#x27;allPrice&#x27;() &#123;<br>      let allSum = this.list.reduce((sum, obj) =&gt; &#123;<br>        if (obj.goods_state === true) &#123;<br>          sum += obj.goods_count * obj.goods_price;<br>        &#125;<br>        return sum;<br>      &#125;, 0);<br>      return allSum;<br>    &#125;,<br>  &#125;,<br>&#125;;<br>&lt;/script&gt;<br><br>&lt;style lang=&quot;less&quot; scoped&gt;<br>.my-footer &#123;<br>  position: fixed;<br>  z-index: 2;<br>  bottom: 0;<br>  width: 100%;<br>  height: 50px;<br>  border-top: 1px solid #ccc;<br>  display: flex;<br>  justify-content: space-between;<br>  align-items: center;<br>  padding: 0 10px;<br>  background: #fff;<br><br>  .price &#123;<br>    color: red;<br>    font-weight: bold;<br>    font-size: 15px;<br>  &#125;<br><br>  .footer-btn &#123;<br>    min-width: 80px;<br>    height: 30px;<br>    line-height: 30px;<br>    border-radius: 25px;<br>    padding: 0;<br>  &#125;<br>&#125;<br>&lt;/style&gt;<br></code></pre></td></tr></table></figure>



<blockquote>
<p>components&#x2F;MyCount.vue</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div class=&quot;my-counter&quot;&gt;<br>    &lt;button<br>      type=&quot;button&quot;<br>      class=&quot;btn btn-light&quot;<br>      @click=&quot;subtractCount&quot;<br>      :disabled=&quot;dataObj.goods_count &lt;= 1&quot;<br>    &gt;<br>      -<br>    &lt;/button&gt;<br>    &lt;input<br>      type=&quot;number&quot;<br>      class=&quot;form-control inp&quot;<br>      v-model.number=&quot;dataObjClone.goods_count&quot;<br>    /&gt;<br>    &lt;button type=&quot;button&quot; class=&quot;btn btn-light&quot; @click=&quot;addCount&quot;&gt;+&lt;/button&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>export default &#123;<br>  name: &quot;MyCount&quot;,<br>  props: &#123;<br>    dataObj: &#123;<br>      type: Object,<br>      default: () =&gt; (&#123;&#125;),<br>    &#125;,<br>  &#125;,<br>  data() &#123;<br>    return &#123;<br>      dataObjClone: this.dataObj,<br>    &#125;;<br>  &#125;,<br>  watch: &#123;<br>    &#x27;dataObjClone&#x27;: &#123;<br>      deep: true,<br>      handler() &#123;<br>        // 内容只能是大于等于1的值，如果违背这一条规则，则强制修改为1<br>        if (this.dataObj.goods_count &lt; 1) &#123;<br>          this.dataObjClone.goods_count = 1;<br>        &#125;<br>      &#125;<br>    &#125;<br>  &#125;,<br>  methods: &#123;<br>    // 点击一次减少1<br>    subtractCount() &#123;<br>      // 如果当前数量小于等于1时，不可减少<br>      if (this.dataObj.goods_count &lt;= 1) &#123;<br>        return;<br>      &#125;<br>      this.dataObjClone.goods_count--;<br>    &#125;,<br>    // 点击一次增加1<br>    addCount() &#123;<br>      this.dataObjClone.goods_count++;<br>    &#125;<br>  &#125;,<br>&#125;;<br>&lt;/script&gt;<br><br>&lt;style lang=&quot;less&quot; scoped&gt;<br>.my-counter &#123;<br>  display: flex;<br><br>  .inp &#123;<br>    width: 45px;<br>    text-align: center;<br>    margin: 0 10px;<br>  &#125;<br><br>  .btn,<br>  .inp &#123;<br>    transform: scale(0.9);<br>  &#125;<br>&#125;<br>&lt;/style&gt;<br></code></pre></td></tr></table></figure>

<h2 id="五、面试题"><a href="#五、面试题" class="headerlink" title="五、面试题"></a>五、面试题</h2><h3 id="1、Vue-的-nextTick-的原理是什么"><a href="#1、Vue-的-nextTick-的原理是什么" class="headerlink" title="1、Vue 的 nextTick 的原理是什么?"></a>1、Vue 的 nextTick 的原理是什么?</h3><p> \1. 为什么需要 nextTick ，Vue 是异步修改 DOM 的并且不鼓励开发者直接接触 DOM，但有时候业务需要必须对数据更改–刷新后的 DOM 做相应的处理，这时候就可以使用 Vue.nextTick(callback)这个 api 了。</p>
<p> \2. 理解原理前的准备 首先需要知道事件循环中宏任务和微任务这两个概念,常见的宏任务有 script, setTimeout, setInterval, setImmediate, I&#x2F;O, UI rendering 常见的微任务有 process.nextTick(Nodejs),Promise.then(), MutationObserver;</p>
<p> \3. 理解 nextTick 的原理正是 vue 通过异步队列控制 DOM 更新和 nextTick 回调函数先后执行的方式。如果大家看过这部分的源码，会发现其中做了很多 isNative()的判断，因为这里还存在兼容性优雅降级的问题。可见 Vue 开发团队的深思熟虑，对性能的良苦用心。</p>
<h3 id="2、vue生命周期总共分为几个阶段？"><a href="#2、vue生命周期总共分为几个阶段？" class="headerlink" title="2、vue生命周期总共分为几个阶段？"></a>2、vue生命周期总共分为几个阶段？</h3><p>Vue 实例从创建到销毁的过程，就是生命周期。也就是从开始创建、初始化数据、编译模板、挂载Dom→渲染、更新→渲染、卸载等一系列过程，我们称这是 Vue 的生命周期。</p>
<p>**1**<strong>）beforeCreate</strong></p>
<p> 在实例初始化之后，数据观测 (data observer) 和 event&#x2F;watcher 事件配置之前被调用。</p>
<p>**2**<strong>）created</strong></p>
<p> 在实例创建完成后被立即调用。在这一步，实例已完成以下的配置：数据观测 (data observer)， 属性和方法的运算，watch&#x2F;event 事件回调。然而，挂载阶段还没开始，$el 属性目前不可见。</p>
<p>**3**<strong>）beforeMount</strong></p>
<p> 在挂载开始之前被调用：相关的 render 函数首次被调用。</p>
<p>**4**<strong>）mounted</strong></p>
<p> el 被新创建的 vm.$el 替换，并挂载到实例上去之后调用该钩子。如果 root 实例挂载了一个文档内元素，当 mounted 被调用时 vm.$el 也在文档内。</p>
<p>**5**<strong>）beforeUpdate</strong></p>
<p> 数据更新时调用，发生在虚拟 DOM 打补丁之前。这里适合在更新之前访问现有的 DOM，比如手动移除已添加的事件监听器。该钩子在服务器端渲染期间不被调用，因为只有初次渲染会在服务端进行。</p>
<p>**6**<strong>）updated</strong></p>
<p> 由于数据更改导致的虚拟 DOM 重新渲染和打补丁，在这之后会调用该钩子。</p>
<p>**7**<strong>）activated</strong></p>
<p> keep-alive 组件激活时调用。该钩子在服务器端渲染期间不被调用。</p>
<p>**8**<strong>）deactivated</strong></p>
<p> keep-alive 组件停用时调用。该钩子在服务器端渲染期间不被调用。</p>
<p>**9**<strong>）beforeDestroy</strong></p>
<p> 实例销毁之前调用。在这一步，实例仍然完全可用。该钩子在服务器端渲染期间不被调用。</p>
<p>**10**<strong>）destroyed</strong></p>
<p> Vue 实例销毁后调用。调用后，Vue 实例指示的所有东西都会解绑定，所有的事件监听器会被移除，所有的子实例也会被销毁。该钩子在服务器端渲染期间不被调用。</p>
<p>**11**<strong>）errorCaptured（2.5.0+ 新增）</strong></p>
<p> 当捕获一个来自子孙组件的错误时被调用。此钩子会收到三个参数：错误对象、发生错误的组件实例以及一个包含错误来源信息的字符串。此钩子可以返回 false 以阻止该错误继续向上传播。</p>
<h3 id="3、第一次加载页面会触发哪几个钩子函数？"><a href="#3、第一次加载页面会触发哪几个钩子函数？" class="headerlink" title="3、第一次加载页面会触发哪几个钩子函数？"></a>3、第一次加载页面会触发哪几个钩子函数？</h3><p>当页面第一次页面加载时会触发 beforeCreate, created, beforeMount, mounted 这几个钩子函数</p>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/Vue/" class="category-chain-item">Vue</a>
  
  
    <span>></span>
    
  <a href="/categories/Vue/%E7%AC%AC%E4%BA%94%E5%A4%A9/" class="category-chain-item">第五天</a>
  
  

  

      </span>
    
  
</span>

    </div>
  
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>Vue 第五天</div>
      <div>http://example.com/2022/09/21/Vue/vue05/Vue-第五天/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>John Doe</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2022年9月21日</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>许可协议</div>
          <div>
            
              
              
                <a target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - 署名">
                    <i class="iconfont icon-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2022/09/23/Vue/vue06/Vue%20%E7%AC%AC%E5%85%AD%E5%A4%A9/" title="Vue 第六天">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">Vue 第六天</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2022/09/20/Vue/vue04/Vue-%E7%AC%AC%E5%9B%9B%E5%A4%A9/" title="Vue 第四天">
                        <span class="hidden-mobile">Vue 第四天</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.18.2/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
